<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Doggo</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.min.css') }}">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>


    <!-- Bootstrap core CSS -->
    <link href="static/css/bootstrap.min.css" rel="stylesheet">
  </head>
  <body>

    <div class="container">
      <form class="form-signin" role="form">
        <h2 class="form-signin-heading">Do </h2>
        <input type="text" name="search" class="form-control"required autofocus>
        <button class="btn btn-lg btn-primary btn-block" type="button">Do</button>
      </form>
    </div>

    <div id="temp"></div>
    <div class="progress" style="width: 50%; margin: 50px;">
        <div class="progress-bar progress-bar-striped active"  role="progressbar"
        aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%">
    </div>

    <p>RESULTS:</p>
    <div name="output" id="output"></div>

  </body>
</html>
  <script>
    var source = new EventSource("/progress");
    source.onmessage = function(event) {
        $('.progress-bar').css('width', event.data+'%').attr('aria-valuenow', event.data);
    }
  </script>
	<script>
  $(function() {
    $('button').click(function() {
      $.ajax({
        url: "/loadProgress",
        success: function(result){
    			$("#bar").html(result);
          var input = $('#search').val();
          $.ajax({
              url: '/api/classify',
              data: $('form').serialize(),
              type: 'POST',
              success: function(res) {
                $('#output').html("");
                for (var i=0; i <= res.results.length; i++) {
                  $('#output').append(res.results[i].name + "  ");
                  $('#output').append(res.results[i].score);
                  $('#output').append("<br><br>");
                }
                return false;
              },
              error: function(error) {
                  alert(error);
                  return false;
              }
          });
  		}});
    });
  });
	</script>
